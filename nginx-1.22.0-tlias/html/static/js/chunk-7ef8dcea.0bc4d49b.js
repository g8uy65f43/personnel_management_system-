(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ef8dcea"],{7737:function(e,t,a){"use strict";a("cb53")},cb53:function(e,t,a){},d89e:function(e,t,a){"use strict";a.r(t);a("b0c0"),a("ac1f"),a("5319");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchEmp}},[t("el-form-item",{attrs:{label:"名前"}},[t("el-input",{attrs:{placeholder:"従業員の名前を入力してください"},model:{value:e.searchEmp.name,callback:function(t){e.$set(e.searchEmp,"name",t)},expression:"searchEmp.name"}})],1),t("el-form-item",{attrs:{label:"性別"}},[t("el-select",{attrs:{placeholder:"選択してください"},model:{value:e.searchEmp.gender,callback:function(t){e.$set(e.searchEmp,"gender",t)},expression:"searchEmp.gender"}},[t("el-option",{attrs:{label:"男性",value:"1"}}),t("el-option",{attrs:{label:"女性",value:"2"}})],1)],1),t("el-form-item",{attrs:{label:"入社日"}},[t("el-date-picker",{staticStyle:{width:"400px","margin-left":"20px"},attrs:{clearable:"","value-format":"yyyy-MM-dd",type:"daterange",placeholder:"日付を選択","range-separator":"から","start-placeholder":"開始日","end-placeholder":"終了日"},model:{value:e.entrydate,callback:function(t){e.entrydate=t},expression:"entrydate"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("検索")]),t("el-button",{attrs:{type:"info"},on:{click:e.clear}},[e._v("クリア")])],1)],1),t("el-row",[t("el-button",{attrs:{type:"danger",size:"medium"},on:{click:e.deleteByIds}},[e._v("- 一括削除")]),t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.dialogVisible=!0,e.emp={image:""}}}},[e._v("+ 新規従業員")])],1),t("el-dialog",{ref:"form",attrs:{title:"従業員を編集",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.emp,"label-width":"80px",size:"mini"}},[t("el-form-item",{attrs:{label:"ユーザー名"}},[t("el-input",{model:{value:e.emp.username,callback:function(t){e.$set(e.emp,"username",t)},expression:"emp.username"}})],1),t("el-form-item",{attrs:{label:"従業員名"}},[t("el-input",{model:{value:e.emp.name,callback:function(t){e.$set(e.emp,"name",t)},expression:"emp.name"}})],1),t("el-form-item",{attrs:{label:"性別"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"選択してください"},model:{value:e.emp.gender,callback:function(t){e.$set(e.emp,"gender",t)},expression:"emp.gender"}},e._l(e.genderList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"写真"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/upload",headers:e.token,name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.emp.image?t("img",{staticClass:"avatar",attrs:{src:e.emp.image}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"職位"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"選択してください","value-key":"emp.job"},model:{value:e.emp.job,callback:function(t){e.$set(e.emp,"job",t)},expression:"emp.job"}},e._l(e.jobList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"入社日"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"date",placeholder:"日付を選択",size:"small"},model:{value:e.emp.entrydate,callback:function(t){e.$set(e.emp,"entrydate",t)},expression:"emp.entrydate"}})],1),t("el-form-item",{attrs:{label:"所属部門"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"選択してください"},model:{value:e.emp.deptId,callback:function(t){e.$set(e.emp,"deptId",t)},expression:"emp.deptId"}},e._l(e.deptList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("送信")]),t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("キャンセル")])],1)],1)],1),t("br"),[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t("el-table-column",{attrs:{prop:"name",label:"名前",align:"center"}}),t("el-table-column",{attrs:{prop:"image",label:"写真",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var a=e.row;return[t("el-image",{staticStyle:{width:"auto",height:"40px",border:"none",cursor:"pointer"},attrs:{src:a.image}})]}}])}),t("el-table-column",{attrs:{align:"center",label:"性別"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(" "+e._s("1"==a.row.gender?"男性":"女性"))])]}}])}),t("el-table-column",{attrs:{align:"center",label:"職位"},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.job?t("span",{staticStyle:{"margin-right":"10px"}},[e._v("班主任")]):e._e(),2==a.row.job?t("span",{staticStyle:{"margin-right":"10px"}},[e._v("講師")]):e._e(),3==a.row.job?t("span",{staticStyle:{"margin-right":"10px"}},[e._v("学務主管")]):e._e(),4==a.row.job?t("span",{staticStyle:{"margin-right":"10px"}},[e._v("教務主管")]):e._e()]}}])}),t("el-table-column",{attrs:{align:"center",label:"入社日"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.entrydate)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"最終操作時間"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.updateTime?t.row.updateTime.replace("T"," "):"")+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.update(a.row.id)}}},[e._v("編集")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteById(a.row.id)}}},[e._v("削除")])]}}])})],1)],t("el-pagination",{attrs:{background:e.background,"current-page":e.currentPage,"page-sizes":[5,10,15,20],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],2)},l=[],r=a("b775");function i(e,t,a,n,l,i){return Object(r["a"])({url:"/emps?name="+e+"&gender="+t+"&begin="+a+"&end="+n+"&page="+l+"&pageSize="+i,method:"get"})}function s(e){return Object(r["a"])({url:"/emps",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/emps",method:"put",data:e})}function c(e){return Object(r["a"])({url:"/emps/"+e,method:"delete"})}function u(e){return Object(r["a"])({url:"/emps/"+e,method:"get"})}var d=a("fe05"),m=a("5f87"),p={data:function(){return{background:!0,pageSize:5,totalCount:100,currentPage:1,dialogVisible:!1,searchEmp:{name:"",gender:""},emp:{image:""},deptList:[],genderList:[{id:1,name:"男性"},{id:2,name:"女性"}],jobList:[{id:1,name:"班主任"},{id:2,name:"講師"},{id:3,name:"学務主管"},{id:4,name:"教育研究主管"}],beginTime:"",endTime:"",entrydate:"",selectedIds:[],multipleSelection:[],tableData:[],token:{token:Object(m["a"])()}}},mounted:function(){var e=this;this.page(),Object(d["c"])().then((function(t){e.deptList=t.data.data}))},methods:{page:function(){var e=this;i(this.searchEmp.name,this.searchEmp.gender,this.beginTime,this.endTime,this.currentPage,this.pageSize).then((function(t){e.totalCount=t.data.data.total,e.tableData=t.data.data.rows}))},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(){this.currentPage=1,this.page()},clear:function(){this.searchEmp={name:"",gender:""},this.beginTime="",this.endTime="",this.entrydate="",this.page()},add:function(){var e,t=this;e=this.emp.id?o(this.emp):s(this.emp),e.then((function(e){"1"==e.data.code?(t.dialogVisible=!1,t.page(),t.$message({message:"おめでとうございます、保存されました",type:"success"}),t.emp={image:""}):t.$message.error(e.data.msg)}))},update:function(e){var t=this;this.dialogVisible=!0,u(e).then((function(e){1==e.data.code&&(t.emp=e.data.data,t.emp)}))},handleSizeChange:function(e){this.pageSize=e,this.page()},handleCurrentChange:function(e){this.currentPage=e,this.page()},deleteById:function(e){var t=this;this.$confirm("この操作はデータを削除します、続行しますか？","注意",{confirmButtonText:"確認",cancelButtonText:"キャンセル",type:"warning"}).then((function(){c(e).then((function(e){1==e.data.code?(t.$message.success("おめでとうございます、削除されました"),t.page()):t.$message.error(e.data.msg)}))})).catch((function(){t.$message.info("削除がキャンセルされました")}))},deleteByIds:function(){var e=this;this.$confirm("この操作はデータを削除します、続行しますか？","注意",{confirmButtonText:"確認",cancelButtonText:"キャンセル",type:"warning"}).then((function(){for(var t=0;t<e.multipleSelection.length;t++)e.selectedIds[t]=e.multipleSelection[t].id;c(e.selectedIds).then((function(t){"1"==t.data.code?(e.$message.success("おめでとうございます、削除されました"),e.page()):e.$message.error(t.data.msg)}))})).catch((function(){e.$message.info("削除がキャンセルされました")}))},handleAvatarSuccess:function(e,t){this.emp.image=e.data},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("アップロードするアバター画像はJPG形式である必要があります！"),a||this.$message.error("アップロードするアバター画像のサイズは2MBを超えてはいけません！"),t&&a}}},f=p,g=(a("7737"),a("2877")),h=Object(g["a"])(f,n,l,!1,null,null,null);t["default"]=h.exports},fe05:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return o}));var n=a("b775");function l(){return Object(n["a"])({url:"/depts",method:"get"})}function r(e){return Object(n["a"])({url:"/depts",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/depts",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/depts/"+e,method:"delete"})}function o(e){return Object(n["a"])({url:"/depts/"+e,method:"get"})}}}]);